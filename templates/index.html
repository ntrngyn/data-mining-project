<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>D·ª± ƒëo√°n m·ª©c ƒë·ªô r·ªßi ro thai s·∫£n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <h2>üß™ D·ª± ƒëo√°n m·ª©c ƒë·ªô r·ªßi ro thai s·∫£n</h2>

    <form method="POST" id="predictForm">
        <label>Tu·ªïi</label>
        <input type="number" name="age" step="any">

        <label>Huy·∫øt √°p t√¢m thu</label>
        <input type="number" name="systolic" step="any">

        <label>Huy·∫øt √°p t√¢m tr∆∞∆°ng</label>
        <input type="number" name="diastolic" step="any">

        <label>Ch·ªâ s·ªë ƒë∆∞·ªùng huy·∫øt (BS)</label>
        <input type="number" name="bs" step="any">

        <label>Nhi·ªát ƒë·ªô c∆° th·ªÉ</label>
        <input type="number" id="bodytemp" name="bodytemp" step="any">
        <div class="temp-options">
            <label><input type="radio" name="temp_unit" value="C" checked> ¬∞C</label>
            <label><input type="radio" name="temp_unit" value="F"> ¬∞F</label>
        </div>

        <label>Nh·ªãp tim</label>
        <input type="number" name="heartrate" step="any">

        <div class="button-group">
            <button type="submit">D·ª± ƒëo√°n</button>
            <button type="button" onclick="clearForm()">X√≥a</button>
        </div>
    </form>

    {% if prediction_text %}
    <div id="overlay" onclick="closeModal()"></div>
    <div class="modal" id="resultModal">
        <span class="close" onclick="closeModal()">√ó</span>
        <div class="modal-content">{{ prediction_text | safe }}</div>
    </div>
    <script>
        // T·ª± ƒë·ªông m·ªü modal khi c√≥ k·∫øt qu·∫£
        window.addEventListener('DOMContentLoaded', () => {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('resultModal').style.display = 'block';
        });

        function closeModal() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('resultModal').style.display = 'none';
        }
    </script>
    {% endif %}

    <script>
        function convertTempToF() {
            const tempInput = document.getElementById('bodytemp');
            const unit = document.querySelector('input[name="temp_unit"]:checked').value;

            if (unit === "C" && tempInput.value !== "") {
                const tempF = parseFloat(tempInput.value) * 9 / 5 + 32;
                tempInput.value = tempF.toFixed(2);
            }
        }

        function clearForm() {
            document.querySelector('form').reset();
        }

        document.getElementById('predictForm').addEventListener('submit', convertTempToF);
    </script>
</body>

</html>